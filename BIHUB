-- üîß ‡πÄ‡∏£‡∏¥‡πà‡∏° GUI
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local StartButton = Instance.new("TextButton")
local PlayButton = Instance.new("TextButton")
local ClearButton = Instance.new("TextButton")
local SaveProfileButton = Instance.new("TextButton")
local LoadProfileButton = Instance.new("TextButton")
local StatusLabel = Instance.new("TextLabel")

-- üì¶ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ GUI
ScreenGui.Parent = game.CoreGui
Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.Position = UDim2.new(0, 20, 0, 150)
Frame.Size = UDim2.new(0, 200, 0, 300)

-- ‡∏õ‡∏∏‡πà‡∏° Start Record
StartButton.Parent = Frame
StartButton.Position = UDim2.new(0, 10, 0, 10)
StartButton.Size = UDim2.new(0, 180, 0, 40)
StartButton.Text = "üî¥ Start Record"
StartButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)

-- ‡∏õ‡∏∏‡πà‡∏° Play Auto
PlayButton.Parent = Frame
PlayButton.Position = UDim2.new(0, 10, 0, 60)
PlayButton.Size = UDim2.new(0, 180, 0, 40)
PlayButton.Text = "üü¢ Play Auto"
PlayButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)

-- ‡∏õ‡∏∏‡πà‡∏° Clear
ClearButton.Parent = Frame
ClearButton.Position = UDim2.new(0, 10, 0, 110)
ClearButton.Size = UDim2.new(0, 180, 0, 30)
ClearButton.Text = "üü° Clear Data"
ClearButton.BackgroundColor3 = Color3.fromRGB(255, 200, 50)

-- ‡∏õ‡∏∏‡πà‡∏° Save Profile
SaveProfileButton.Parent = Frame
SaveProfileButton.Position = UDim2.new(0, 10, 0, 150)
SaveProfileButton.Size = UDim2.new(0, 180, 0, 30)
SaveProfileButton.Text = "üíæ Save Profile"
SaveProfileButton.BackgroundColor3 = Color3.fromRGB(100, 200, 255)

-- ‡∏õ‡∏∏‡πà‡∏° Load Profile
LoadProfileButton.Parent = Frame
LoadProfileButton.Position = UDim2.new(0, 10, 0, 190)
LoadProfileButton.Size = UDim2.new(0, 180, 0, 30)
LoadProfileButton.Text = "üìÇ Load Profile"
LoadProfileButton.BackgroundColor3 = Color3.fromRGB(150, 255, 100)

-- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
StatusLabel.Parent = Frame
StatusLabel.Position = UDim2.new(0, 10, 0, 230)
StatusLabel.Size = UDim2.new(0, 180, 0, 30)
StatusLabel.Text = "‚è∫Ô∏è Recorded: 0"
StatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusLabel.BackgroundTransparency = 1

-- üåê ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥
getgenv().actions = {}
local isRecording = false

-- üü• ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (‡∏à‡∏≥‡∏•‡∏≠‡∏á)
StartButton.MouseButton1Click:Connect(function()
    isRecording = true
    table.insert(actions, {
        time = tick(),
        action = "PlaceUnit",
        data = {x = 100, y = 0, z = -100, unit = "Ichigo"}
    })
    StatusLabel.Text = "‚è∫Ô∏è Recorded: " .. tostring(#actions)
end)

-- üü© ‡πÄ‡∏•‡πà‡∏ô‡∏ã‡πâ‡∏≥
PlayButton.MouseButton1Click:Connect(function()
    if #actions == 0 then return end
    local t0 = actions[1].time
    for _, a in ipairs(actions) do
        task.delay(a.time - t0, function()
            if a.action == "PlaceUnit" then
                print("üîß ‡∏ß‡∏≤‡∏á‡∏¢‡∏π‡∏ô‡∏¥‡∏ï", a.data.unit, "‡∏ó‡∏µ‡πà", a.data.x, a.data.z)
                -- TODO: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏á‡∏¢‡∏π‡∏ô‡∏¥‡∏ï‡∏à‡∏£‡∏¥‡∏á
            end
        end)
    end
end)

-- üü® ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
ClearButton.MouseButton1Click:Connect(function()
    actions = {}
    StatusLabel.Text = "‚è∫Ô∏è Recorded: 0"
end)

-- üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ getfenv/savefile ‡∏ñ‡πâ‡∏≤ executor ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö)
SaveProfileButton.MouseButton1Click:Connect(function()
    if writefile then
        writefile("astdx_profile.json", game:GetService("HttpService"):JSONEncode(actions))
        print("‚úÖ ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå astdx_profile.json")
    else
        warn("‚ùå Executor ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö writefile")
    end
end) -- ‚Üê ‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö

-- üìÇ ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
LoadProfileButton.MouseButton1Click:Connect(function()
    if readfile then
        local content = readfile("astdx_profile.json")
        actions = game:GetService("HttpService"):JSONDecode(content)
        StatusLabel.Text = "‚è∫Ô∏è Recorded: " .. tostring(#actions)
        print("‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à")
    else
        warn("‚ùå Executor ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö readfile")
    end
end)

